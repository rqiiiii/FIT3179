<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malaysia Road Accident Visualisation</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Lato:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Vega Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    html, body {
      width: 100%;
      overflow-x: hidden; /* prevents side scroll */
      font-family: 'Lato', sans-serif;
      background: linear-gradient(180deg, #fcfbf7 0%, #f6f3ee 100%);
      color: #222;
      line-height: 1.5;
    }

    /* ===== HEADER ===== */
    header {
      position: relative;
      width: 100%;
      height: 210px;
      overflow: hidden;
    }

    .banner-img {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }

    /* ===== MAIN CONTENT ===== */
    main {
      padding: 40px 10%;
      display: flex;
      flex-direction: column;
      gap: 60px;
      align-items: center; /* center everything inside main */
    }

    .story-text {
      font-size: 1.3rem;
      text-align: justify;
      margin: 0 auto;
      max-width: 1000px;
      line-height: 1.6;
      color: #333;
    }

    h2 {
      font-family: 'Playfair Display', serif;
      font-size: 2rem;
      border-left: 5px solid #003a79;
      padding-left: 15px;
      color: #222;
      margin: 10px auto 15px;
      text-align: center;
      width: fit-content;
    }

    .chart-text {
      font-size: 1rem;
      text-align: center;
      color: #444;
      max-width: 900px;
      margin: 10px auto 20px;
    }

    /* ==== Chart Containers Centered ==== */
    .chart-placeholder, 
    .worldmap, 
    .choroplethmap, 
    .bump {
      width: 100%;
      max-width: 1100px;
      height: 550px;
      display: flex;
      justify-content: center; /* horizontally center chart content */
      align-items: center;
      margin: 0 auto;
    }

    /* For two-column section */
    .charts-row {
      display: flex;
      flex-wrap: wrap;
      gap: 40px;
      justify-content: center;
      align-items: flex-start;
    }

    .chart-column {
      text-align: center;
    }

    /* specifically target the left and right columns */
    .chart-column:first-child {
      flex: 0 0 60%;   /* üëà left chart takes 60% of the row */
      max-width: 700px;
    }

    .chart-column:last-child {
      flex: 0 0 35%;   /* üëà right chart takes 35% */
      max-width: 500px;
    }

    /* .chart-column {
      flex: 1;
      min-width: 450px;
      max-width: 600px;
      text-align: center; /* centers header and text within column */
    


    .chart-column h2 {
      text-align: center;
      border-left: none;
      border-bottom: 3px solid #003a79;
      display: inline-block;
      padding-bottom: 5px;
    }

    /* ===== FOOTER ===== */
    footer {
      text-align: center;
      background: #222;
      color: #f5f5f5;
      padding: 25px;
      font-size: 0.9rem;
      margin-top: 40px;
      width: 100%;
    }

    /* ===== RESPONSIVE ===== */
    @media (max-width: 1000px) {
      main {
        padding: 30px 5%;
        gap: 40px;
      }

      header {
        height: 300px;
      }

      h2 {
        font-size: 1.8rem;
      }

      .story-text {
        font-size: 1.1rem;
      }

      .chart-placeholder, .worldmap, .choroplethmap, .bump {
        height: 450px;
      }
    }

    @media (max-width: 600px) {
      header {
        height: 250px;
      }

      h2 {
        font-size: 1.5rem;
      }

      .chart-text {
        font-size: 0.95rem;
      }
    }
  </style>
</head>
<body>
  <header>
    <img src="data/image/Malaysia_accident_header.png" alt="Road Accidents in Malaysia" class="banner-img">
  </header>

  <main>
    <div class="story-text">
      Malaysia‚Äôs road networks are among the busiest in Southeast Asia, connecting millions of people daily. Yet behind this activity lies a worrying reality ‚Äî road accidents remain a significant public health concern. This feature presents interactive insights into accident trends, vehicle types, and regional risks.
    </div>

    <!-- World Map -->
    <section>
      <h2>Estimated Road Traffic Death Rate by Country (2021)</h2>
      <div class="chart-text">
        A global perspective on road traffic fatalities reveals that Libya and Guinea have the highest death rates, while Malaysia sits near the regional average.
      </div>
      <div id="worldmap" class="worldmap"></div>
    </section>

    <!-- Choropleth Map -->
    <section>
      <h2>Road Accident Rates in Malaysia by State (2011‚Äì2021)</h2>
      <div class="chart-text">
        Across the years, Kuala Lumpur consistently records the highest number of road accidents, with darker shades indicating higher incident counts. In 2021, accident numbers dropped across all states, likely reflecting the impact of COVID-19 lockdowns.
        <br><strong>üìçInteractive:</strong> Use the slider to select different years and compare accident rankings across Malaysian states.
      </div>
      <div id="choroplethmap" class="choroplethmap"></div>
    </section>

    <!-- Bump Chart -->
    <section>
      <h2>Malaysian State Ranking by Accident Severity (2011‚Äì2021)</h2>
      <div class="chart-text">
        Malaysian states are ranked based on accident severity from 2011 to 2021. Higher ranks indicate more severe accidents for the selected type.
        <br><strong>üìçInteractive:</strong> Use the dropdown to select different severities and compare trends.
      </div>
      <div id="bump" class="bump"></div>
    </section>

    <section>
      <h2>Victims Over Time: Deaths vs Injuries (2001‚Äì2019)</h2>
      <div class="chart-text">
       While injuries dropped in 2006, they still remain much higher than deaths. Motorcyclists are the most affected, highlighting their high risk on Malaysian roads.
      <br><strong>üìçInteractive:</strong> Use the slider to filter by year.
      </div>
      <div id="areastack"></div>
    </section>

    <section>
      <h2>Accident Causes by Road User Type (2000‚Äì2019)</h2>
      <div class="chart-text">
       Motorcycles were responsible for the largest share of accidents consistently contributed the most to accidents over the years.
      <br><strong>üìçInteractive:</strong> Use the slider to filter by year.
      </div>
      <div id="donut" class="chart-placeholder"></div>
    </section>
  </main>

  <footer>
    <p>Created by Gan Ruiqi | FIT3179 Data Visualisation (2025)</p>
  </footer>

  <script src="js/vega_lite_vis.js"></script>
</body>
</html>
