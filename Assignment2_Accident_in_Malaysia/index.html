<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Malaysia Road Accident Visualisation</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Lato:wght@400;700&display=swap" rel="stylesheet" />

  <!-- Vega Libraries -->
  <script src="https://cdn.jsdelivr.net/npm/vega@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-lite@6"></script>
  <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: 'Lato', sans-serif; background: #fcfbf7; color: #333; line-height: 1.7; }
    header { background: url('https://images.unsplash.com/photo-1533558707410-89e9e96b1be3?auto=format&fit=crop&w=1400&q=60') center/cover no-repeat; color: white; text-align: center; padding: 100px 20px; position: relative; box-shadow: 0 8px 25px rgba(0,0,0,0.3);}
    header::after { content: ""; position: absolute; inset: 0; background: rgba(0,0,0,0.45); z-index: 0; }
    header h1 { position: relative; z-index: 1; font-family: 'Playfair Display', serif; font-size: 3rem; margin-bottom: 15px; letter-spacing: 1px; }
    header p { position: relative; z-index: 1; max-width: 800px; margin: 0 auto; font-size: 1.2rem; opacity: 0.9; }
    main { padding: 60px 10%; display: flex; flex-direction: column; gap: 80px; background: linear-gradient(180deg, #fcfbf7 0%, #f6f3ee 100%); }
    h2 { font-family: 'Playfair Display', serif; font-size: 2rem; border-left: 5px solid #007bff; padding-left: 15px; color: #222; margin-bottom: 25px; }
    .story-text { column-count: 2; column-gap: 40px; text-align: justify; margin-bottom: 30px; }
    .story-text::first-letter { font-family: 'Playfair Display', serif; font-size: 3.5rem; float: left; line-height: 0.9; margin-right: 8px; color: #007bff; }

    .chart-section { display: flex; flex-direction: row; align-items: flex-start; gap: 30px; margin-bottom: 50px; flex-wrap: wrap; }
    .chart-section .chart-text { flex: 1; min-width: 300px; font-size: 1rem; color: #333; line-height: 1.6; }

    .quote { font-family: 'Playfair Display', serif; font-size: 1.4rem; color: #007bff; text-align: center; padding: 30px 20px; border-left: 4px solid #007bff; background: #f9fbff; margin: 40px 0; border-radius: 6px; }
    footer { text-align: center; background: #222; color: #f5f5f5; padding: 25px; font-size: 0.9rem; }

    @media (max-width: 900px) { .story-text { column-count: 1; } header h1 { font-size: 2.4rem; } .chart-section { flex-direction: column; } }
  </style>
</head>
<body>
  <header>
    <h1>Road Accidents in Malaysia (2011)</h1>
    <p>Exploring Malaysia’s road safety data — visualised like never before.</p>
  </header>

  <main>
    <div class="story-text">
      Malaysia’s road networks are among Southeast Asia’s busiest, connecting millions daily. Behind this motion lies a concerning statistic — road accidents remain a major public health issue. This feature presents interactive insights on accident trends, vehicle types, and regional risks.
    </div>

    <!-- Choropleth Map -->
    <h2>Accident Hotspots by State</h2>
    <div class="chart-section">
      <div id="worldmap" class="worldmap"></div>
      <div class="chart-text">
        This map highlights the Malaysian states with the highest number of road accidents in 2011. Darker shades indicate more incidents.
      </div>
    </div>

    <!-- Choropleth Map -->
    <h2>Accident Hotspots by State</h2>
    <div class="chart-section">
      <div id="choroplethmap" class="choroplethmap"></div>
      <div class="chart-text">
        This map highlights the Malaysian states with the highest number of road accidents in 2011. Darker shades indicate more incidents.
      </div>
    </div>

    <!-- Severity Bump Chart -->
    <h2>Severity of Road Accidents</h2>
    <div class="chart-section">
      <div id="bump" class="bump"></div>
      <div class="chart-text">
        The bump chart compares accident severity across different regions and vehicle types, showing which causes more critical injuries.
      </div>
    </div>

    <!-- Donut Chart -->
    <h2>Injuries by Vehicle Type</h2>
    <div class="chart-section">
      <div id="donut" class="chart-placeholder"></div>
      <div class="chart-text">
        This donut chart shows the proportion of injuries by vehicle type in 2011, highlighting motorcycles as the most affected.
      </div>
    </div>


    <!-- Area Stacked Chart -->
    <h2>Trends Over Time: Deaths vs Injuries</h2>
    <div class="chart-section">
      <div id="areastack" class="chart-placeholder"></div>
      <div class="chart-text">
        This area chart shows how deaths and injuries have changed over time, allowing for quick trend comparisons and insight into accident patterns.
      </div>
    </div>
  </main>

  <footer>
    <p>Created by Gan Ruiqi | FIT3179 Data Visualisation (2025)</p>
  </footer>

  <script src="js/vega_lite_vis.js"></script>
</body>
</html>
